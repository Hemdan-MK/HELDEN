<!DOCTYPE html>
<html lang="en">

<head>
    <title>Log in</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="/users/images/icons/favicon.png" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/vendor/bootstrap/css/bootstrap.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/fonts/font-awesome-4.7.0/css/font-awesome.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/fonts/iconic/css/material-design-iconic-font.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/fonts/linearicons-v1.0.0/icon-font.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/vendor/animate/animate.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/vendor/css-hamburgers/hamburgers.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/vendor/animsition/css/animsition.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/vendor/select2/select2.min.css" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/users/vendor/perfect-scrollbar/perfect-scrollbar.css" />
    <!--===============================================================================================-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Font Awsome CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- SweetAlert CDN -->
    <link rel="stylesheet" type="text/css" href="/users/css/util.css" />
    <link rel="stylesheet" href="/users/css/reg-log.css">
    <link rel="stylesheet" type="text/css" href="/users/css/main.css" />
    <!--===============================================================================================-->
</head>

<body class="animsition">
    <!-- Header -->
    <%- include('./layout/header') %>

        <!-- Signup Container -->
        <div class="container up-container">
            <div class="row g-0 col-lg-12">
                <div class="col-lg-6 d-flex align-items-center">
                    <div class="up-form">
                        <h2 class="mb-4 text-center">L O G I N</h2>
                        <form action="/login" id="log-form" method="post">
                            <div class="mb-3">
                                <label for="email" class="form-label">Email address</label>
                                <input type="email" class="form-control" name="email" id="email"
                                    placeholder="Enter email">
                            </div>
                            <div class="mb-3">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" name="password" id="password"
                                    placeholder="Password">
                            </div>
                            <button type="submit" class="btn btn-dark w-100">Signup</button>
                        </form>
                        <hr>
                        <a href="/auth/google" class="btn btn-outline-dark w-100 mb-2"><i class="fab fa-google"></i>
                            Sign in with Google</a>
                        <a href="/forgot-password" class="btn btn-outline-dark w-100"><i class="fab "></i> Forgot
                            Password</a>
                        <p class="text-center mt-3">Don't Have an account? <a href="/register">Sign in</a></p>
                    </div>
                </div>
                <div class="col-lg-6 background-image2 d-none d-lg-block"></div>
            </div>
        </div>




        <!-- Footer -->
        <%- include('./layout/footer') %>

            <!-- Back to top -->
            <div class="btn-back-to-top" id="myBtn">
                <span class="symbol-btn-back-to-top">
                    <i class="zmdi zmdi-chevron-up"></i>
                </span>
            </div>


            <script>

                // Check if there is an error query parameter
                const urlParams = new URLSearchParams(window.location.search);
                const errorMessage = urlParams.get('error');
                const errorMessage2 = urlParams.get('error2');

                if (errorMessage) {
                    // Show SweetAlert with the error message
                    Swal.fire({
                        icon: 'error',
                        title: 'User Already Exists!',
                        text: 'Please log in to your account.',
                        footer: '<a href="/register">Want to create a new account?</a>',
                    });
                }

                if (errorMessage2) {
                    // Show SweetAlert with the error message
                    Swal.fire({
                        icon: 'error',
                        title: 'User Not Exists!',
                        text: 'Please Sign Up .',
                        footer: '<a href="/register">Want to create a new account?</a>',
                    });
                }




                
                    <% if (typeof showAlert !== 'undefined' && showAlert) { %>
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: '<%= message %>',
                    });
                    <% } %>


                    document.getElementById('log-form').addEventListener('submit', (e) => {


                        if (!formValidate()) {
                            e.preventDefault()
                        }
                    })


                function formValidate() {
                    var email = document.getElementById('email').value.trim();
                    var password = document.getElementById('password').value.trim();
                    // Empty field validation
                    if (email === "" || password === "") {
                        sweetAlert("Oops...", "All fields are required!", "error");
                        return false;
                    }

                    // Email format validation
                    var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailPattern.test(email)) {
                        sweetAlert("Invalid Email", "Please enter a valid email address.", "error");
                        return false;
                    }

                    // Password validation
                    if (password.length < 8) {
                        sweetAlert("Too Short", "Password must be at least 6 characters long.", "error"
                        ); return false;
                    } return true;
                } </script>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>

            <!--===============================================================================================-->
            <script src="/users/vendor/jquery/jquery-3.2.1.min.js"></script>
            <!--===============================================================================================-->
            <script src="/users/vendor/animsition/js/animsition.min.js"></script>
            <!--===============================================================================================-->
            <script src="/users/vendor/bootstrap/js/popper.js"></script>
            <script src="/users/vendor/bootstrap/js/bootstrap.min.js"></script>
            <!--===============================================================================================-->
            <script src="/users/vendor/select2/select2.min.js"></script>
            <script>
                $(".js-select2").each(function () {
                    $(this).select2({
                        minimumResultsForSearch: 20,
                        dropdownParent: $(this).next(".dropDownSelect2"),
                    });
                });
            </script>
            <!--===============================================================================================-->
            <script src="/users/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
            <!--===============================================================================================-->
            <script src="/users/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
            <script>
                $(".js-pscroll").each(function () {
                    $(this).css("position", "relative");
                    $(this).css("overflow", "hidden");
                    var ps = new PerfectScrollbar(this, {
                        wheelSpeed: 1,
                        scrollingThreshold: 1000,
                        wheelPropagation: false,
                    });

                    $(window).on("resize", function () {
                        ps.update();
                    });
                });
            </script>
            <!--===============================================================================================-->
            <script src="/users/js/main.js"></script>
</body>

</html>